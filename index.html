<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anonimowy Komunikator</title>
    
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    
    <div id="chat-container">
        
        <div id="messages-history">
            </div>
        
        <div id="input-area">
            <input type="text" id="message-input" placeholder="pisz i nie czekaj" maxlength="250">
            <button id="send-button">ok</button>
        </div>
        
    </div>
    <script>
        // Logika JavaScript 
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const messagesHistory = document.getElementById('messages-history');
        
        // Generuje losowy, anonimowy ID użytkownika
        const anonymousID = 'Anonim ' + Math.floor(Math.random() * 900 + 100);
        
        // Funkcja do wyświetlania wiadomości
        function displayMessage(sender, text, isMe) {
            const wrapper = document.createElement('div');
            wrapper.classList.add('message-wrapper');
            
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(isMe ? 'message-me' : 'message-other');
            
            // Dodawanie nadawcy
            const senderSpan = document.createElement('span');
            senderSpan.classList.add('message-sender');
            senderSpan.textContent = sender;
            if (!isMe && sender !== 'System') { // System nie pokazuje nazwy w dymku
                messageElement.appendChild(senderSpan);
            }

            // Dodawanie treści
            messageElement.innerHTML += text;
            
            // Jeśli to wiadomość systemowa, dodaj odpowiednią klasę i styl
            if (sender === 'System') {
                 messageElement.classList.add('system-message');
                 // Wiadomości systemowe są dodawane bezpośrednio do historii, bez wrappera
                 messagesHistory.appendChild(messageElement);
            } else {
                 wrapper.appendChild(messageElement);
                 messagesHistory.appendChild(wrapper);
            }
            
            // Przewiń na dół
            messagesHistory.scrollTop = messagesHistory.scrollHeight;
        }

        // Funkcja wysyłania wiadomości
        function sendMessage() {
            const text = messageInput.value.trim();

            if (text !== "") {
                // Symulacja: wyświetlamy tylko naszą wiadomość
                displayMessage(anonymousID, text, true); 

                messageInput.value = "";
            }
        }

        // Event Listenery
        sendButton.addEventListener('click', sendMessage);
        
        messageInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });

        // WYŚWIETLENIE JEDNEJ WIADOMOŚCI SYSTEMOWEJ NA START
        displayMessage('System', `twoja tymczasowa nazwa to: ${anonymousID}. narazie błedów bedzie.`, 'system');
        
    </script>

</body>
</html>

